<!-- Loading spinner -->
<app-loading *ngIf="loading; else loaded"></app-loading>

<ng-template #loaded>
  <div class="card container container--single container--single__auth">
    <main class="main">
      <h2>Creer un compte</h2>
      <form [formGroup]="registerForm" class="form">   
        <div class="form-group form-group--pos-relative" (mouseover)="helper('email', true)" (mouseout)="helper('email', false)">
            <label for="email">E-mail </label>
            <input id="email" type="email" formControlName="email" placeholder="Adresse e-mail">
            <span *ngIf="!(registerForm.controls['email'].invalid)" id="checkmark"></span>
        </div>
        <span *ngIf="emailHelperBoolean" class="helperContainer">L'adresse e-mail saisie doit être au format "adresse@exemple.com"</span>
        <div class="form-group form-group--pos-relative">
          <label for="username">Pseudo </label>
          <input id="username" type="text" formControlName="username" placeholder="Pseudo">
          <span *ngIf="!(registerForm.controls['username'].invalid)" id="checkmark"></span>
        </div>
        <span></span>
        <div class="form-group form-group--pos-relative" (mouseover)="helper('password', true)" (mouseout)="helper('password', false)">
            <label for="password">Mot de passe </label>
            <input id="password" [type]="visiblePassword? 'text' : 'password'" formControlName="password" placeholder="Mot de passe">
            <fa-icon class="passwordEyeIcon" [icon]="visiblePassword? faEye : faEyeSlash" (click)="toggleVisibility()"></fa-icon>
            <span *ngIf="!(registerForm.controls['password'].invalid)" id="checkmark"></span>
        </div>
        <div *ngIf="passwordHelperBoolean" class="helperContainer">
          <span>Votre mot de passe doit contenir :</span>
            <span class="helperContainer__text">- au moins 8 caractères</span>
            <span class="helperContainer__text">- une majuscule</span>
            <span class="helperContainer__text">- une minuscule</span>
            <span class="helperContainer__text">- un chiffre</span>
        </div>
        <div class="form-group__buttons">
            <button class="btn" type="submit" (click)="onRegister()" [disabled]="registerForm.invalid">S'enregistrer</button>
        </div>
        <app-info-box [infoBox]="infoBox"></app-info-box>
      </form>
    
      <p class="main__footer--profile__log">Vous avez un compte? <a routerLink="/login">Connectez-vous</a></p>
    </main>
  </div>
</ng-template>